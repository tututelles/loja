<!DOCTYPE html>
<html>
<head><title>Dashboard</title></head>
<body>
  <h2>Bem-vindo, <span id="nomeUsuario"></span>!</h2>
  <p>Plano: <span id="planoUsuario"></span></p>
  <p>Validade: <span id="validadeUsuario"></span></p>
  <button onclick="logout()">Sair</button>

  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
  <script src="firebase.js"></script>
  <script>
    auth.onAuthStateChanged(user => {
      if (!user) {
        window.location.href = "index.html";
        return;
      }

      db.collection("usuarios").doc(user.uid).get().then(doc => {
        const data = doc.data();
        document.getElementById("nomeUsuario").innerText = data.nome;
        document.getElementById("planoUsuario").innerText = data.plano;
        document.getElementById("validadeUsuario").innerText = data.validade || "Sem validade";
      });
    });

    function logout() {
      auth.signOut().then(() => {
        window.location.href = "index.html";
      });
    }
  </script>
</body>
</html>
